{"version":3,"sources":["utils/filterRecipes.ts","utils/getRecipeTypeOptions.ts","utils/mungGoogleSheetsEntry.ts","utils/sortRecipes.ts","api.ts","components/Counter.tsx","components/Recipe.tsx","components/SearchFilter.tsx","components/App.tsx","index.tsx"],"names":["filterRecipes","recipes","filters","recipeType","recipeNameSearch","filter","recipe","booleans","push","type","name","toLowerCase","search","every","Boolean","getTypes","map","reduce","options","includes","getRecipeTypeOptions","currentValue","typesInRecipes","enabledTypes","sort","a","b","localeCompare","value","active","disabled","mungGoogleSheetsEntry","entry","id","gsx$name","gsx$type","gsx$link","$t","link","sortRecipes","adapter","axios","create","baseURL","get","response","data","feed","Error","Counter","count","role","aria-live","className","CardWrapper","styled","div","CardHeader","h2","CardLink","Button","Recipe","nameSearch","showType","Card","CardBody","data-testid","highlightClassName","searchWords","textToHighlight","aria-label","color","href","target","rel","ClearIconWrapper","span","SearchFilter","recipeTypeOptions","handleRecipeTypeChange","handleRecipeNameSearchChange","handleClear","selectedRecipeType","useState","typeDropdownIsOpen","setTypeDropdownIsOpen","InputGroup","InputGroupButtonDropdown","addonType","isOpen","toggle","DropdownToggle","outline","caret","DropdownMenu","DropdownItem","onClick","key","Input","placeholder","onChange","event","currentTarget","spellCheck","InputGroupAddon","aria-hidden","SearchFilterCounterWrapper","App","loading","setLoading","error","setError","setRecipes","setRecipeType","setRecipeNameSearch","filteredRecipes","useEffect","api","nextRecipes","fetchRecipes","Container","Row","Col","xs","size","offset","sm","md","lg","length","ReactDOM","render","document","getElementById"],"mappings":"wSA4BeA,EA1BO,SAAC,GAML,IALhBC,EAKe,EALfA,QACAC,EAIe,EAJfA,QAKQC,EAAiCD,EAAjCC,WAAYC,EAAqBF,EAArBE,iBAEpB,OAAOH,EAAQI,QAAO,SAAAC,GACpB,IAAMC,EAAW,GAYjB,OAVIJ,GACFI,EAASC,KAAKF,EAAOG,OAASN,GAG5BC,GACFG,EAASC,MAC+D,IAAtEF,EAAOI,KAAKC,cAAcC,OAAOR,EAAiBO,gBAI/CJ,EAASM,MAAMC,a,QCrBpBC,EAAW,SAACd,GAAD,OACfA,EACGe,KAAI,qBAAGP,QACPQ,QAAO,SAACC,EAAmBT,GAI1B,OAHKS,EAAQC,SAASV,IACpBS,EAAQV,KAAKC,GAERS,IACN,KAyBQE,EAvBc,SAAC,GAQF,IAP1BnB,EAOyB,EAPzBA,QACAC,EAMyB,EANzBA,QACAmB,EAKyB,EALzBA,aAMMC,EAAiBP,EAASd,GAC1BsB,EAAeR,EACnBf,EAAc,CAAEC,UAASC,QAAQ,eAAMA,EAAP,CAAgBC,WAAY,UAG9D,OAAOmB,EACJE,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEE,cAAcD,MAC/BV,KAAI,SAAAY,GAAK,MAAK,CACbA,QACAC,OAAQD,IAAUP,EAClBS,UAAWP,EAAaJ,SAASS,QCtBxBG,EARe,SAACC,GAAD,OAC5BA,EAAMhB,KAAI,WAAmCiB,GAAnC,IAAGC,EAAH,EAAGA,SAAUC,EAAb,EAAaA,SAAUC,EAAvB,EAAuBA,SAAvB,MAA2C,CACnDH,KACAvB,KAAMwB,EAASG,GACf5B,KAAM0B,EAASE,GACfC,KAAMF,EAASC,QCFJE,EAHK,SAACtC,GAAD,OAClBA,EAAQuB,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEf,KAAKiB,cAAcD,EAAEhB,UCCnC8B,EAAUC,IAAMC,OAAO,CAClCC,QAAS,2CAGI,aAC2B,OAAD,mIAEZH,EAAQI,IAC7B,iFAHiC,cAE7BC,EAF6B,yBAK5Bd,EAAsBc,EAASC,KAAKC,KAAKf,QALb,sCAO7B,IAAIgB,MAAM,0BAPmB,4DCG1BC,EAN0B,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OACvC,2BAAOC,KAAK,QAAQC,YAAU,SAASC,UAAU,0BAC9CH,EADH,IACqB,IAAVA,EAAc,SAAW,Y,6XCGtC,IAiCMI,EAAcC,IAAOC,IAAV,KAIXC,EAAaF,IAAOG,GAAV,KAKVC,EAAWJ,YAAOK,IAAPL,CAAH,KAMCM,EAhDwB,SAAC,GAAD,IACrCnD,EADqC,EACrCA,KACAD,EAFqC,EAErCA,KACA6B,EAHqC,EAGrCA,KACAwB,EAJqC,EAIrCA,WACAC,EALqC,EAKrCA,SALqC,OAOrC,kBAACT,EAAD,KACE,kBAACU,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACR,EAAD,KACE,kBAAC,IAAD,CACES,cAAY,cACZC,mBAAmB,wBACnBC,YAAa,CAACN,GAAc,IAC5BO,gBAAiB3D,IAElBqD,GAAY,2BAAOV,UAAU,cAAjB,KAAiC5C,EAAjC,MAEf,kBAACkD,EAAD,CACEW,aAAA,qBAA0B5D,GAC1B6D,MAAM,UACNC,KAAMlC,EACNmC,OAAO,SACPC,IAAI,uBALN,c,6PChBR,IAAMC,EAAmBpB,IAAOqB,KAAV,KAwFPC,EAtEoC,SAAC,GAO7C,IANL1E,EAMI,EANJA,WACA2E,EAKI,EALJA,kBACAC,EAII,EAJJA,uBACA3E,EAGI,EAHJA,iBACA4E,EAEI,EAFJA,6BACAC,EACI,EADJA,YAEMC,EAAqB/E,GAAc,MADrC,EAEgDgF,oBAAS,GAFzD,mBAEGC,EAFH,KAEuBC,EAFvB,KAMJ,OACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,UACVC,OAAQL,EACRM,OARqB,kBACzBL,GAAuBD,KASnB,kBAACO,EAAA,EAAD,CACErB,aAAA,6BAAkCY,GAClCX,MAAM,UACNqB,SAAO,EACPC,OAAK,GAEJX,GAEH,kBAACY,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACElE,OAAuB,OAAf1B,EACR6F,QAAS,kBAAYjB,EAAuB,QAF9C,OAMCD,EAAkB9D,KAAI,gBAAGY,EAAH,EAAGA,MAAOC,EAAV,EAAUA,OAAQC,EAAlB,EAAkBA,SAAlB,OACrB,kBAACiE,EAAA,EAAD,CACEE,IAAKrE,EACLC,OAAQA,EACRC,SAAUA,EACVkE,QAAS,kBAAYjB,EAAuBnD,KAE3CA,QAKT,kBAACsE,EAAA,EAAD,CACEC,YAAY,sBACZ9C,UAAU,cACVzB,MAAOxB,GAAoB,GAC3BgG,SAAU,SAACC,GAAD,OACRrB,EAA6BqB,EAAMC,cAAc1E,QAEnD2E,YAAY,IAEd,kBAACC,EAAA,EAAD,CAAiBhB,UAAU,UACzB,kBAAC5B,EAAA,EAAD,CACEU,aAAW,0BACXC,MAAM,UACNqB,SAAO,EACPI,QAAS,kBAAYf,MAErB,kBAACN,EAAD,CAAkB8B,cAAY,QAA9B,Y,+FCrFV,IAAMC,EAA6BnD,IAAOC,IAAV,KA4GjBmD,EAxGO,WAAO,IAAD,EACIxB,oBAAkB,GADtB,mBACnByB,EADmB,KACVC,EADU,OAEA1B,mBAAS,MAFT,mBAEnB2B,EAFmB,KAEZC,EAFY,OAGI5B,mBAAoB,IAHxB,mBAGnBlF,EAHmB,KAGV+G,EAHU,OAIU7B,mBAAwB,MAJlC,mBAInBhF,EAJmB,KAIP8G,EAJO,OAKsB9B,mBAAwB,MAL9C,mBAKnB/E,EALmB,KAKD8G,EALC,KAMpBhH,EAAU,CACdC,aACAC,oBAEI0E,EAAoB1D,EAAqB,CAC7CnB,UACAC,UACAmB,aAAclB,IAEVgH,EAAkBnH,EAAc,CAAEC,UAASC,YAmBjD,OAjBAkH,qBAAU,YACU,uCAAG,4BAAA3F,EAAA,6DACnBsF,EAAS,MACTF,GAAW,GAFQ,kBAKSQ,IALT,OAKXC,EALW,OAMjBN,EAAWzE,EAAY+E,IANN,gDAQjBP,EAAS,EAAD,IARS,QAUnBF,GAAW,GAVQ,yDAAH,qDAalBU,KACC,IAGD,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,GAAI,CAAEC,KAAM,GAAIC,OAAQ,GACxBC,GAAI,CAAEF,KAAM,GAAIC,OAAQ,GACxBE,GAAI,CAAEH,KAAM,GAAIC,OAAQ,GACxBG,GAAI,CAAEJ,KAAM,EAAGC,OAAQ,GACvBxE,UAAU,eAEV,wBAAIA,UAAU,QAAd,WAEMuD,EACK,uBAAGvD,UAAU,cAAb,sBAGLyD,EACK,uBAAGzD,UAAU,eAAb,0BAGLpD,EAAQgI,OAER,oCACE,kBAACvB,EAAD,KACE,kBAAC,EAAD,CACEvG,WAAYA,EACZ2E,kBAAmBA,EACnBC,uBAAwBkC,EACxB7G,iBAAkBA,EAClB4E,6BAA8BkC,EAC9BjC,YAAa,WACXgC,EAAc,MACdC,EAAoB,SAGxB,kBAAC,EAAD,CAAShE,MAAOiE,EAAgBc,UAEjCd,EAAgBc,OACfd,EAAgBnG,KAAI,gBAAGiB,EAAH,EAAGA,GAAIvB,EAAP,EAAOA,KAAMD,EAAb,EAAaA,KAAM6B,EAAnB,EAAmBA,KAAnB,OAClB,kBAAC,EAAD,CACE2D,IAAKhE,EACLvB,KAAMA,EACND,KAAMA,EACN6B,KAAMA,EACNwB,WAAY1D,EACZ2D,UAAW5D,OAIf,iCACK,gCAASA,GADd,oBACoD,IAClD,gCAASC,EAAT,OAQR,uBAAG+C,KAAK,QAAQC,YAAU,aAA1B,mB,MCrGd8E,IAASC,OACP,kBAAC,aAAD,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.a985c120.chunk.js","sourcesContent":["import { IRecipe, IFilters } from '../types';\n\nconst filterRecipes = ({\n  recipes,\n  filters\n}: {\n  recipes: IRecipe[];\n  filters: IFilters;\n}): IRecipe[] => {\n  const { recipeType, recipeNameSearch } = filters;\n\n  return recipes.filter(recipe => {\n    const booleans = [];\n\n    if (recipeType) {\n      booleans.push(recipe.type === recipeType);\n    }\n\n    if (recipeNameSearch) {\n      booleans.push(\n        recipe.name.toLowerCase().search(recipeNameSearch.toLowerCase()) !== -1\n      );\n    }\n\n    return booleans.every(Boolean);\n  });\n};\n\nexport default filterRecipes;\n","import { IFilters, IRecipe, IRecipeTypeOption } from '../types';\nimport filterRecipes from './filterRecipes';\n\nconst getTypes = (recipes: IRecipe[]): string[] =>\n  recipes\n    .map(({ type }) => type)\n    .reduce((options: string[], type) => {\n      if (!options.includes(type)) {\n        options.push(type);\n      }\n      return options;\n    }, []);\n\nconst getRecipeTypeOptions = ({\n  recipes,\n  filters,\n  currentValue\n}: {\n  recipes: IRecipe[];\n  filters: IFilters;\n  currentValue: string | null;\n}): IRecipeTypeOption[] => {\n  const typesInRecipes = getTypes(recipes);\n  const enabledTypes = getTypes(\n    filterRecipes({ recipes, filters: { ...filters, recipeType: null } })\n  );\n\n  return typesInRecipes\n    .sort((a, b) => a.localeCompare(b))\n    .map(value => ({\n      value,\n      active: value === currentValue,\n      disabled: !enabledTypes.includes(value)\n    }));\n};\n\nexport default getRecipeTypeOptions;\n","import { IGoogleSheetsRow, IRecipe } from '../types';\n\nconst mungGoogleSheetsEntry = (entry: IGoogleSheetsRow[]): IRecipe[] =>\n  entry.map(({ gsx$name, gsx$type, gsx$link }, id) => ({\n    id,\n    name: gsx$name.$t,\n    type: gsx$type.$t,\n    link: gsx$link.$t\n  }));\n\nexport default mungGoogleSheetsEntry;\n","import { IRecipe } from '../types';\n\nconst sortRecipes = (recipes: IRecipe[]): IRecipe[] =>\n  recipes.sort((a, b) => a.name.localeCompare(b.name));\n\nexport default sortRecipes;\n","import axios from 'axios';\nimport { IRecipe } from './types';\nimport { mungGoogleSheetsEntry } from './utils';\n\nexport const adapter = axios.create({\n  baseURL: 'https://spreadsheets.google.com/feeds/'\n});\n\nexport default {\n  async getRecipes(): Promise<IRecipe[]> {\n    try {\n      const response = await adapter.get(\n        '/list/106-nwBqrxeCGMSY0ZOUAjRvlbL2b2xAJgPy67M_Btc8/od6/public/values?alt=json'\n      );\n      return mungGoogleSheetsEntry(response.data.feed.entry);\n    } catch (err) {\n      throw new Error('Error fetching recipes');\n    }\n  }\n};\n","import React from 'react';\n\ninterface ICounterProps {\n  count: number;\n}\n\nconst Counter: React.FC<ICounterProps> = ({ count }) => (\n  <small role=\"alert\" aria-live=\"polite\" className=\"text-muted font-italic\">\n    {count} {count === 1 ? 'recipe' : 'recipes'}\n  </small>\n);\n\nexport default Counter;\n","import React from 'react';\nimport Highlighter from 'react-highlight-words';\nimport { Button, Card, CardBody } from 'reactstrap';\nimport styled from 'styled-components';\nimport { IRecipe } from '../types';\n\nexport interface IRecipeProps extends Omit<IRecipe, 'id'> {\n  nameSearch: string | null;\n  showType: boolean;\n}\n\nconst Recipe: React.FC<IRecipeProps> = ({\n  name,\n  type,\n  link,\n  nameSearch,\n  showType\n}) => (\n  <CardWrapper>\n    <Card>\n      <CardBody>\n        <CardHeader>\n          <Highlighter\n            data-testid=\"recipe-name\"\n            highlightClassName=\"highlight-word-search\"\n            searchWords={[nameSearch || '']}\n            textToHighlight={name}\n          />\n          {showType && <small className=\"text-muted\"> ({type})</small>}\n        </CardHeader>\n        <CardLink\n          aria-label={`Recipe for ${name}`}\n          color=\"primary\"\n          href={link}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Recipe\n        </CardLink>\n      </CardBody>\n    </Card>\n  </CardWrapper>\n);\n\nconst CardWrapper = styled.div`\n  margin-bottom: 12px;\n`;\n\nconst CardHeader = styled.h2`\n  font-size: 1.5rem;\n  margin-bottom: 12px;\n`;\n\nconst CardLink = styled(Button)`\n  @media (max-width: 576px) {\n    display: block;\n  }\n`;\n\nexport default Recipe;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButtonDropdown\n} from 'reactstrap';\nimport styled from 'styled-components';\nimport { IRecipeTypeOption } from '../types';\n\nconst ClearIconWrapper = styled.span`\n  float: right;\n  font-size: 1.5rem;\n  font-weight: 700;\n  line-height: 1;\n  text-shadow: 0 1px 0 #fff;\n  opacity: 0.5;\n`;\n\ninterface ISearchFilterProps {\n  recipeType: string | null;\n  recipeTypeOptions: IRecipeTypeOption[];\n  handleRecipeTypeChange: (nextRecipeType: string | null) => void;\n  recipeNameSearch: string | null;\n  handleRecipeNameSearchChange: (nextRecipeNameSearch: string | null) => void;\n  handleClear: () => void;\n}\n\nconst SearchFilter: React.FC<ISearchFilterProps> = ({\n  recipeType,\n  recipeTypeOptions,\n  handleRecipeTypeChange,\n  recipeNameSearch,\n  handleRecipeNameSearchChange,\n  handleClear\n}) => {\n  const selectedRecipeType = recipeType || 'All';\n  const [typeDropdownIsOpen, setTypeDropdownIsOpen] = useState(false);\n  const toggleTypeDropdown = (): void =>\n    setTypeDropdownIsOpen(!typeDropdownIsOpen);\n\n  return (\n    <InputGroup>\n      <InputGroupButtonDropdown\n        addonType=\"prepend\"\n        isOpen={typeDropdownIsOpen}\n        toggle={toggleTypeDropdown}\n      >\n        <DropdownToggle\n          aria-label={`filter recipe type ${selectedRecipeType}`}\n          color=\"primary\"\n          outline\n          caret\n        >\n          {selectedRecipeType}\n        </DropdownToggle>\n        <DropdownMenu>\n          <DropdownItem\n            active={recipeType === null}\n            onClick={(): void => handleRecipeTypeChange(null)}\n          >\n            All\n          </DropdownItem>\n          {recipeTypeOptions.map(({ value, active, disabled }) => (\n            <DropdownItem\n              key={value}\n              active={active}\n              disabled={disabled}\n              onClick={(): void => handleRecipeTypeChange(value)}\n            >\n              {value}\n            </DropdownItem>\n          ))}\n        </DropdownMenu>\n      </InputGroupButtonDropdown>\n      <Input\n        placeholder=\"search recipe names\"\n        className=\"text-center\"\n        value={recipeNameSearch || ''}\n        onChange={(event): void =>\n          handleRecipeNameSearchChange(event.currentTarget.value)\n        }\n        spellCheck={false}\n      />\n      <InputGroupAddon addonType=\"append\">\n        <Button\n          aria-label=\"clear filter and search\"\n          color=\"primary\"\n          outline\n          onClick={(): void => handleClear()}\n        >\n          <ClearIconWrapper aria-hidden=\"true\">×</ClearIconWrapper>\n        </Button>\n      </InputGroupAddon>\n    </InputGroup>\n  );\n};\n\nexport default SearchFilter;\n","import React, { useEffect, useState } from 'react';\nimport { Col, Container, Row } from 'reactstrap';\nimport styled from 'styled-components';\nimport api from '../api';\nimport { IRecipe } from '../types';\nimport { filterRecipes, getRecipeTypeOptions, sortRecipes } from '../utils';\nimport Counter from './Counter';\nimport Recipe from './Recipe';\nimport SearchFilter from './SearchFilter';\n\nconst SearchFilterCounterWrapper = styled.div`\n  margin-bottom: 16px;\n`;\n\nconst App: React.FC = () => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState(null);\n  const [recipes, setRecipes] = useState<IRecipe[]>([]);\n  const [recipeType, setRecipeType] = useState<string | null>(null);\n  const [recipeNameSearch, setRecipeNameSearch] = useState<string | null>(null);\n  const filters = {\n    recipeType,\n    recipeNameSearch\n  };\n  const recipeTypeOptions = getRecipeTypeOptions({\n    recipes,\n    filters,\n    currentValue: recipeType\n  });\n  const filteredRecipes = filterRecipes({ recipes, filters });\n\n  useEffect(() => {\n    const fetchRecipes = async (): Promise<void> => {\n      setError(null);\n      setLoading(true);\n\n      try {\n        const nextRecipes = await api.getRecipes();\n        setRecipes(sortRecipes(nextRecipes));\n      } catch (e) {\n        setError(e);\n      }\n      setLoading(false);\n    };\n\n    fetchRecipes();\n  }, []);\n\n  return (\n    <Container>\n      <Row>\n        <Col\n          xs={{ size: 12, offset: 0 }}\n          sm={{ size: 10, offset: 1 }}\n          md={{ size: 12, offset: 0 }}\n          lg={{ size: 8, offset: 2 }}\n          className=\"text-center\"\n        >\n          <h1 className=\"mt-3\">Recipes</h1>\n          {((): JSX.Element => {\n            if (loading) {\n              return <p className=\"text-muted\">Loading recipes...</p>;\n            }\n\n            if (error) {\n              return <p className=\"text-danger\">Error loading recipes!</p>;\n            }\n\n            if (recipes.length) {\n              return (\n                <>\n                  <SearchFilterCounterWrapper>\n                    <SearchFilter\n                      recipeType={recipeType}\n                      recipeTypeOptions={recipeTypeOptions}\n                      handleRecipeTypeChange={setRecipeType}\n                      recipeNameSearch={recipeNameSearch}\n                      handleRecipeNameSearchChange={setRecipeNameSearch}\n                      handleClear={(): void => {\n                        setRecipeType(null);\n                        setRecipeNameSearch(null);\n                      }}\n                    />\n                    <Counter count={filteredRecipes.length} />\n                  </SearchFilterCounterWrapper>\n                  {filteredRecipes.length ? (\n                    filteredRecipes.map(({ id, name, type, link }) => (\n                      <Recipe\n                        key={id}\n                        name={name}\n                        type={type}\n                        link={link}\n                        nameSearch={recipeNameSearch}\n                        showType={!recipeType}\n                      />\n                    ))\n                  ) : (\n                    <p>\n                      No <strong>{recipeType}</strong> recipes matching{' '}\n                      <strong>{recipeNameSearch}.</strong>\n                    </p>\n                  )}\n                </>\n              );\n            }\n\n            return (\n              <p role=\"alert\" aria-live=\"assertive\">\n                No recipes.\n              </p>\n            );\n          })()}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport React, { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './index.css';\n\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}